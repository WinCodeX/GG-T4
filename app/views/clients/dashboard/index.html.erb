<!-- app/views/clients/dashboard/index.html.erb -->

<body class="bg-dracula-background text-dracula-foreground">

  <main class="flex h-[calc(100vh-4rem)] w-full overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-64 h-full bg-[#1e1f29] border-r border-[#44475a] overflow-y-auto p-4">
      <%= render "shared/sidebar" %>
    </aside>

    <!-- Dashboard Content -->
    <section class="flex-1 overflow-y-auto">
      <%= turbo_frame_tag :dashboard do %>

        <div class="flex h-full">
          <% case controller_name %>

          <% when 'chat_rooms' %>
            <!-- ğŸ“‹ Chat List -->
            <div class="w-[380px] h-full bg-[#1e1f2b] border-r border-[#44475a] overflow-y-auto p-4">
              <%= render "shared/chat_list", chat_rooms: @chat_rooms %>
            </div>

            <!-- ğŸ’¬ Chat Panel -->
            <section class="flex-1 overflow-y-auto p-6">
              <!-- ChatRoom#show renders here -->
            </section>

          <% when 'trackings' %>
            <section class="flex-1 overflow-y-auto p-6">
              <h1 class="text-3xl font-bold mb-4">Track Your Package</h1>
              <%= render "trackings/index" %>
            </section>

          <% when 'promotions' %>
            <section class="flex-1 overflow-y-auto p-6">
              <h1 class="text-3xl font-bold mb-4">For You</h1>
              <%= render "promotions/index" %>
            </section>

          <% else %>
            <!-- ğŸ“¦ Default Dashboard -->
            <section class="flex-1 overflow-y-auto p-6">
              <div class="flex flex-col items-center justify-start pt-12">
                <h1 class="text-4xl font-bold mb-4">Start sending</h1>
                <p class="text-lg mb-8 text-dracula-comment">
                  Manage and create new packages below.
                </p>
                <button
                  onclick="document.getElementById('create-package-modal').classList.remove('hidden')"
                  data-agents="<%= Agent.select(:id, :name).to_json %>"
                  data-locations="<%= Location.select(:id, :name).to_json %>"
                  data-couriers="<%= CourierService.select(:id, :name).to_json %>"
                  class="px-6 py-3 bg-[#6b46c1] text-white rounded-xl hover:bg-[#9f7aea]"
                >
                  Create New Package
                </button>
                <%= render "packages/create_modal" %>
              </div>
            </section>

          <% end %> <!-- This closes the case block properly -->
        </div>

      <% end %>
    </section>

  </main>

</body>