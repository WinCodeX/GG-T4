<!-- ðŸ§© Clients::Dashboard#index -->
<!-- app/views/layouts/dashboard.html.erb -->
<!-- ðŸ”’ Fixed Sidebar --><!-- app/views/layouts/dashboard.html.erb -->

<%= render "shared/sidebar" %>

<body class="bg-dracula-background text-dracula-foreground">
  <main class="ml-64 mt-16 h-[calc(100vh-4rem)] overflow-hidden">
    <div class="flex h-full">

      <% case controller_name %>

      <% when 'chat_rooms' %>
        <!-- ðŸ§µ Chat Mode Layout (NO wrapping turbo-frame) -->

        <!-- Sidebar -->
        <aside class="w-[380px] bg-[#1e1f2b] border-r border-[#44475a] overflow-y-auto p-4">
          <%= render "shared/chat_list", chat_rooms: @chat_rooms %>
        </aside>

        <!-- Chat Panel Only Turbo-Framed -->
        <div class="flex-1 flex flex-col">
          <turbo-frame id="chat_panel" class="flex-1 overflow-y-auto p-4 bg-[#0d0d0d]">
            <div class="h-full flex items-center justify-center text-[#6272a4] italic">
              Select a chat to begin.
            </div>
          </turbo-frame>
        </div>

      <% when 'trackings' %>
        <section class="flex-1 overflow-y-auto p-6">
          <h1 class="text-3xl font-bold mb-4">Track Your Package</h1>
          <%= render "trackings/index" %>
        </section>

      <% when 'promotions' %>
        <section class="flex-1 overflow-y-auto p-6">
          <h1 class="text-3xl font-bold mb-4">For You</h1>
          <%= render "promotions/index" %>
        </section>

      <% else %>
        <section class="flex-1 overflow-y-auto p-6">
          <div class="flex flex-col items-center justify-start flex-grow pt-12">
            <h1 class="text-4xl font-bold mb-4">Start sending</h1>
            <p class="text-lg mb-8 text-dracula-comment">Manage and create new packages below.</p>

            <button 
              onclick="document.getElementById('create-package-modal').classList.remove('hidden')" 
              data-agents="<%= Agent.select(:id, :name).to_json %>"
              data-locations="<%= Location.select(:id, :name).to_json %>"
              data-couriers="<%= CourierService.select(:id, :name).to_json %>"
              class="px-6 py-3 bg-[#6b46c1] text-white rounded-xl hover:bg-[#9f7aea]">
              Create New Package
            </button>

            <%= render 'packages/create_modal' %>
          </div>
        </section>

      <% end %>

    </div>
  </main>
</body>