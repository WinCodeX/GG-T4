<h2 class="text-lg font-semibold text-[#f8f8f2] mb-4">Your Chats</h2>

<% @chat_rooms.each do |room| %>
  <% other_user = room.sender == current_user ? room.receiver : room.sender %>

  <%= link_to chat_room_path(room),
              data: { turbo_frame: "chat_panel", turbo_action: "replace" },
              class: "flex items-center p-3 rounded-lg hover:bg-[#313244] transition space-x-3" do %>

    <%= render "shared/user_avatar_with_name", user: other_user %>
    <div class="flex flex-col">
      <span class="text-sm font-medium text-white truncate"><%= other_user.username %></span>
      <span class="text-xs text-[#6272a4] truncate">
        <%= room.messages.last&.body || "No messages yet" %>
      </span>
    </div>

  <% end %>
<% end %>