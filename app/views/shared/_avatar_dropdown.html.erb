<div x-data="{ open: false }" class="relative inline-block text-left">
  <!-- ðŸ–¼ Avatar Trigger -->
  <div
    class="flex items-center cursor-pointer select-none"
    @click="open = !open"
    @click.outside="open = false">

    <span class="text-xl text-gray-100 mr-2">
      <%= current_user.username || current_user.email.split('@').first %>
    </span>

    <% if current_user.avatar.attached? %>
      <%= image_tag current_user.avatar.variant(resize_to_fill: [48, 48]), class: "rounded-full h-12 w-12 object-cover" %>
    <% else %>
      <%= image_tag avatar_url_for(current_user), class: "rounded-full h-12 w-12 object-cover" %>
    <% end %>
  </div>
</div>